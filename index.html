<<!DOCTYPE html>
<html>
<head>
    <title>WhatsApp Bot Pairing</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 500px; margin: 0 auto; padding: 20px; }
        .container { background: #f5f5f5; border-radius: 10px; padding: 20px; text-align: center; }
        .qr-container { margin: 20px 0; }
        .pairing-code { 
            font-size: 24px; 
            font-weight: bold; 
            margin: 15px 0; 
            padding: 15px; 
            background: white; 
            border-radius: 5px;
            display: inline-block;
        }
        .whatsapp-btn { 
            background: #25D366; 
            color: white; 
            text-decoration: none; 
            padding: 10px 20px; 
            border-radius: 5px;
            display: inline-block;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>WhatsApp Bot Pairing</h1>
        <div class="qr-container">
            <p>Scan QR code with WhatsApp</p>
            <pre id="qr-code"></pre>
        </div>
        <div id="pairing-info" style="display: none;">
            <p>Or use pairing code:</p>
            <div class="pairing-code" id="pairing-code"></div>
            <a id="whatsapp-link" class="whatsapp-btn" target="_blank">Link with WhatsApp</a>
        </div>
    </div>

    <script>
        // Connect to server for real-time updates
        const eventSource = new EventSource('/events');
        
        eventSource.onmessage = (event) => {
            const data = JSON.parse(event.data);
            
            if (data.qr) {
                document.getElementById('qr-code').textContent = data.qr;
            }
            
            if (data.pairingCode) {
                document.getElementById('pairing-code').textContent = data.pairingCode;
                document.getElementById('whatsapp-link').href = 
                    `https://wa.me/923237533251?text=Pair%20Code:%20${encodeURIComponent(data.pairingCode)}`;
                document.getElementById('pairing-info').style.display = 'block';
            }
            
            if (data.connected) {
                document.getElementById('qr-code').textContent = 'âœ… Connected to WhatsApp!';
            }
        };
    </script>
</body>
</html>